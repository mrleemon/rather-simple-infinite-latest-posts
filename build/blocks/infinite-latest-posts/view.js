import{getContext as e,getElement as t,store as o}from"@wordpress/interactivity";o("rsilp-store",{callbacks:{renderPosts:function(){const o=e(),n=t();if(o?.posts){const e=document.createDocumentFragment();o.posts.forEach(t=>{const o=document.createElement("article");o.id=`post-${t.id}`,o.className="wp-block-occ-rather-simple-infinite-latest-posts__post";const n=document.createElement("h2");n.className="wp-block-occ-rather-simple-infinite-latest-posts__post-title",n.innerHTML=t.title.rendered;const s=document.createElement("div");s.className="wp-block-occ-rather-simple-infinite-latest-posts__post-content",s.innerHTML=t.content.rendered,o.appendChild(n),o.appendChild(s),e.appendChild(o)}),n.ref.appendChild(e);var s=new Event("rsilp:insertposts");document.dispatchEvent(s)}},saveState:function(){const t=e();sessionStorage.setItem("posts-offset",t.offset)}},actions:{getFirstPosts:function*(){const t=e(),o=sessionStorage.getItem("posts-offset")||t.number,n=yield fetch("https://"+window.location.hostname+"/wp-json/wp/v2/posts?per_page="+encodeURIComponent(o)+"&offset=0&categories="+encodeURIComponent(t.category)+"&_fields=id,title,content",{method:"GET",headers:{"Cache-Control":"max-age=60, must-revalidate"}}).then(function(e){return t.total=e.headers.get("X-WP-Total"),e.json()}).catch(function(e){console.error(e)});t.posts=n,t.offset=parseInt(o),t.display=t.offset<t.total?"block":"none"},getPosts:function*(){const t=e(),o=yield fetch("https://"+window.location.hostname+"/wp-json/wp/v2/posts?per_page="+encodeURIComponent(t.number)+"&offset="+encodeURIComponent(t.offset)+"&categories="+encodeURIComponent(t.category)+"&_fields=id,title,content",{method:"GET",headers:{"Cache-Control":"max-age=60, must-revalidate"}}).then(function(e){return e.json()}).catch(function(e){console.error(e)});t.posts=o,t.offset=parseInt(t.offset)+parseInt(t.number),t.display=t.offset<t.total?"block":"none"}}});